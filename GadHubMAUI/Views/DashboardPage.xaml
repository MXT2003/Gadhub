<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="GadHubMAUI.Views.DashboardPage"
             Title="Tổng quan"
             BackgroundColor="{StaticResource Gray50}">
    <ScrollView>
        <Grid RowDefinitions="Auto,Auto,*"
              Padding="20">

            <!-- Header -->
            <VerticalStackLayout Grid.Row="0" Spacing="12" Margin="0,20,0,25">
                <Label x:Name="lblWelcome" 
                       Text="Xin chào, Admin" 
                       FontSize="26" 
                       TextColor="Black"
                       FontAttributes="Bold" />
                <Label Text="Tổng quan hoạt động kinh doanh" 
                       FontSize="16" 
                       TextColor="Black" />
            </VerticalStackLayout>

            <!-- Stats Cards -->
            <Grid Grid.Row="1" 
                  ColumnDefinitions="*,*" 
                  RowDefinitions="Auto,Auto"
                  ColumnSpacing="12"
                  RowSpacing="12">

                <!-- Doanh thu -->
                <Border Grid.Row="0" Grid.Column="0"
                       BackgroundColor="{StaticResource White}"
                       StrokeShape="RoundRectangle 16"
                       Stroke="{StaticResource Gray200}"
                       StrokeThickness="1"
                       Padding="20">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Doanh thu hôm nay" 
                               FontSize="14" 
                               TextColor="Black" />
                        <Label x:Name="lblDoanhThu" 
                               Text="0 VNĐ" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="Black" />
                    </VerticalStackLayout>
                </Border>

                <!-- Đơn hàng -->
                <Border Grid.Row="0" Grid.Column="1"
                       BackgroundColor="{StaticResource White}"
                       StrokeShape="RoundRectangle 16"
                       Stroke="{StaticResource Gray200}"
                       StrokeThickness="1"
                       Padding="20">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Đơn hàng hôm nay" 
                               FontSize="14" 
                               TextColor="Black" />
                        <Label x:Name="lblDonHang" 
                               Text="0" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="Black" />
                    </VerticalStackLayout>
                </Border>

                <!-- Sản phẩm -->
                <Border Grid.Row="1" Grid.Column="0"
                       BackgroundColor="{StaticResource White}"
                       StrokeShape="RoundRectangle 16"
                       Stroke="{StaticResource Gray200}"
                       StrokeThickness="1"
                       Padding="20">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Tổng sản phẩm" 
                               FontSize="14" 
                               TextColor="Black" />
                        <Label x:Name="lblSanPham" 
                               Text="0" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="Black" />
                    </VerticalStackLayout>
                </Border>

                <!-- Khách hàng -->
                <Border Grid.Row="1" Grid.Column="1"
                       BackgroundColor="{StaticResource White}"
                       StrokeShape="RoundRectangle 16"
                       Stroke="{StaticResource Gray200}"
                       StrokeThickness="1"
                       Padding="20">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Tổng khách hàng" 
                               FontSize="14" 
                               TextColor="Black" />
                        <Label x:Name="lblKhachHang" 
                               Text="0" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="Black" />
                    </VerticalStackLayout>
                </Border>
            </Grid>

            <!-- Recent Orders -->
            <VerticalStackLayout Grid.Row="2" Spacing="20" Margin="0,30,0,0">
                <Label Text="Đơn hàng gần đây" 
                       FontSize="20" 
                       TextColor="Black"
                       FontAttributes="Bold" />

                <CollectionView x:Name="cvRecentOrders">
                    <CollectionView.EmptyView>
                        <Border BackgroundColor="{StaticResource White}"
                               StrokeShape="RoundRectangle 16"
                               Stroke="{StaticResource Gray200}"
                               StrokeThickness="1"
                               Padding="40"
                               Margin="0,10">
                            <Label Text="Không có đơn hàng nào gần đây"
                                   TextColor="Black" 
                                   FontSize="16"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center" />
                        </Border>
                    </CollectionView.EmptyView>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="0,8" 
                                   Padding="20" 
                                   BackgroundColor="{StaticResource White}"
                                   StrokeShape="RoundRectangle 16"
                                   Stroke="{StaticResource Gray200}"
                                   StrokeThickness="1">
                                <Grid ColumnDefinitions="*,Auto">
                                    <VerticalStackLayout Grid.Column="0" Spacing="8">
                                        <Label Text="{Binding MaHD}" 
                                               FontAttributes="Bold"
                                               FontSize="16"
                                               TextColor="Black" />
                                        <Label Text="{Binding TenKH}" 
                                               TextColor="Black" 
                                               FontSize="14" />
                                        <Label Text="{Binding NgayLap, StringFormat='{0:dd/MM/yyyy}'}" 
                                               TextColor="Black" 
                                               FontSize="12" />
                                    </VerticalStackLayout>
                                    <Label Grid.Column="1" 
                                           Text="{Binding GiaTien, StringFormat='{0:N0} VNĐ'}" 
                                           VerticalOptions="Center" 
                                           FontAttributes="Bold" 
                                           FontSize="16"
                                           TextColor="Black" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>
